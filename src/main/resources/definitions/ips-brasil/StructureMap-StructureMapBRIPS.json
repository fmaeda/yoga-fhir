{"resourceType":"StructureMap","id":"StructureMapBRIPS","text":{"status":"generated","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: StructureMap StructureMapBRIPS</b></p><a name=\"StructureMapBRIPS\"> </a><a name=\"hcStructureMapBRIPS\"> </a><a name=\"StructureMapBRIPS-pt-BR\"> </a><pre class=\"fml\">\r\n<b>map</b><span style=\"color: navy\"> &quot;</span>https://ips.saude.gov.br/fhir/StructureMap/StructureMapBRIPS<span style=\"color: navy\">&quot; = &quot;</span>StructureMapBRIPS<span style=\"color: navy\">&quot;\r\n\r\n</span><span style=\"color: navy\">// </span><span style=\"color: green\">Mapeamento de Bundle da RNDS para o IPS</span>\r\n\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/R4/bundle.html\" title=\"Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a><span style=\"color: navy\">&quot; </span><b>alias </b>TLeft <b>as </b><b>source</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/uv/ips/STU1.1/StructureDefinition-Bundle-uv-ips.html\" title=\"Bundle - IPS\">http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips</a><span style=\"color: navy\">&quot; </span><b>alias </b>TRight <b>as </b><b>target</b>\r\n\r\n<b>group </b>RNDSIPSBundle<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span><span style=\"color: navy\"> : </span>TLeft, <b>target</b> <span style=\"color: maroon\">tgt</span><span style=\"color: navy\"> : </span>TRight<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  src.id<b> as </b><span style=\"color: maroon\">RNDSID</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt<b> as </b><span style=\"color: maroon\">IPS</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    RNDSID<span style=\"color: navy\"><b> -&gt; </b></span>tgt.identifier<b> as </b><span style=\"color: maroon\">IPSIdentifier</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      RNDSID<span style=\"color: navy\"><b> -&gt; </b></span> IPS.type = <span style=\"color: blue\">'document'</span><span style=\"color: navy\">, </span> IPS.timestamp = <span style=\"color: navy\">(</span>now()<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSIdentifier.system = <span style=\"color: blue\">'urn:ietf:rfc:3986'</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> IPSIdentifier.value = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span> <i>&quot;SetDocumentTypeAndTimestampAndIdentifier&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;SetMetaData&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;SetBundleMetaData&quot;</i><span style=\"color: navy\">;</span>\r\n  src.entry<b> default </b>&quot;empty&quot;<b> as </b><span style=\"color: maroon\">RNDSEntry</span><span style=\"color: navy\"><b> -&gt; </b></span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntry</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryCondition</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryAllergyIntolerance</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryMedicationStatement</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSConditionNoKnownProblemsReference</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSMedicationStatementNoKnownMedicationsReference</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSAllergyIntoleranceNoKnownAllergiesReference</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSVitalSignsNoKnownVitalSignsReference</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    RNDSEntry<b> where </b>(RNDSEntry = 'empty')<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntry<b> then</b><span style=\"color: navy\"> {\r\n</span>      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> IPSEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span> <i>&quot;SetFullUrl&quot;</i><span style=\"color: navy\">;</span>\r\n      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span><b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Composition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSComposition</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSComposition.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'60591-5'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Patient Summary Document'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSComposition.type = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSComposition.date = <span style=\"color: navy\">(</span>now()<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSComposition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <span style=\"color: navy\">(</span>today()<span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">today</span><span style=\"color: navy\">, </span> IPSComposition.title = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient Summary as of:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">today</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSComposition.confidentiality = <span style=\"color: blue\">'N'</span><span style=\"color: navy\">, </span> IPSComposition.text<b> as </b><span style=\"color: maroon\">IPSCompositionText</span><span style=\"color: navy\">, </span> IPSCompositionText.status = <span style=\"color: blue\">'generated'</span><span style=\"color: navy\">, </span> IPSCompositionText.div = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;Title: International Patient Summary from Brazil, code: http://loinc.org#60591-5, status: generated, confidentiality: N&lt;/div&gt;'</span><span style=\"color: navy\">)</span> <i>&quot;SetCompositionFirstOrderFields&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSComposition.subject<b> as </b><span style=\"color: maroon\">IPSCompositionSubject</span><span style=\"color: navy\">, </span> IPSComposition.author<b> as </b><span style=\"color: maroon\">IPSCompositionAuthor</span><span style=\"color: navy\">, </span> IPSComposition.custodian<b> as </b><span style=\"color: maroon\">IPSCompositionCustodian</span><span style=\"color: navy\">, </span> IPSComposition.section<b> as </b><span style=\"color: maroon\">IPSCompositionSectionActiveProblems</span><span style=\"color: navy\">, </span> IPSComposition.section<b> as </b><span style=\"color: maroon\">IPSCompositionMedication</span><span style=\"color: navy\">, </span> IPSComposition.section<b> as </b><span style=\"color: maroon\">IPSCompositionAllergiesAndIntolerances</span><span style=\"color: navy\">, </span> IPSComposition.section<b> as </b><span style=\"color: maroon\">IPSCompositionVitalSigns</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSCompositionSubject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSCompositionAuthor.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSCompositionCustodian.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">)</span> <i>&quot;SetReferences&quot;</i><span style=\"color: navy\">;</span>\r\n          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSCompositionSectionActiveProblems.title = <span style=\"color: blue\">'Active Problems'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'11450-4'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Problem list Reported'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCompositionSectionActiveProblems.code = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSCompositionSectionActiveProblems.entry<b> as </b><span style=\"color: maroon\">IPSCompositionSectionActiveProblemsEntry</span><span style=\"color: navy\">, </span> IPSCompositionSectionActiveProblemsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSConditionNoKnownProblemsReference</span><span style=\"color: navy\">)</span> <i>&quot;SetActiveProblems&quot;</i><span style=\"color: navy\">;</span>\r\n          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSCompositionMedication.title = <span style=\"color: blue\">'Medications'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'10160-0'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'History of Medication use Narrative'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCompositionMedication.code = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSCompositionMedication.entry<b> as </b><span style=\"color: maroon\">IPSCompositionSectionMedicationEntry</span><span style=\"color: navy\">, </span> IPSCompositionSectionMedicationEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSMedicationStatementNoKnownMedicationsReference</span><span style=\"color: navy\">)</span> <i>&quot;SetTitleMedications&quot;</i><span style=\"color: navy\">;</span>\r\n          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSCompositionAllergiesAndIntolerances.title = <span style=\"color: blue\">'Allergies and Intolerances'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'48765-2'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Allergies and adverse reactions Document'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCompositionAllergiesAndIntolerances.code = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSCompositionAllergiesAndIntolerances.entry<b> as </b><span style=\"color: maroon\">IPSCompositionSectionAllergiesAndIntolerancesEntry</span><span style=\"color: navy\">, </span> IPSCompositionSectionAllergiesAndIntolerancesEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSAllergyIntoleranceNoKnownAllergiesReference</span><span style=\"color: navy\">)</span> <i>&quot;SetAllergiesAndIntolerances&quot;</i><span style=\"color: navy\">;</span>\r\n          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSCompositionVitalSigns.title = <span style=\"color: blue\">'Vital Signs'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'8716-3'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Vital signs'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCompositionVitalSigns.code = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSCompositionVitalSigns.entry<b> as </b><span style=\"color: maroon\">IPSCompositionVitalSignsEntry</span><span style=\"color: navy\">, </span> IPSCompositionVitalSignsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSVitalSignsNoKnownVitalSignsReference</span><span style=\"color: navy\">)</span> <i>&quot;SetVitalSigns&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;SetSubjectAuthorCustodianSection&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntry.resource = <span style=\"color: maroon\">IPSComposition</span> <i>&quot;SetResourceComposition&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;SetComposition&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;SetEmptyComposition&quot;</i><span style=\"color: navy\">;</span>\r\n    RNDSEntry<b> where </b>(RNDSEntry = 'empty')<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryCondition<b> then</b><span style=\"color: navy\"> {\r\n</span>      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> IPSEntryCondition.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span> <i>&quot;SetFullUrl&quot;</i><span style=\"color: navy\">;</span>\r\n      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span><b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSCondition</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-clinical'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'active'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCondition.clinicalStatus = <span style=\"color: maroon\">cc</span> <i>&quot;SetClinicalStatus&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'no-problem-info'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'No information about problems'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCondition.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-ver-status'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'confirmed'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Confirmed'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSCondition.verificationStatus = <span style=\"color: maroon\">cc</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSCondition.subject<b> as </b><span style=\"color: maroon\">IPSConditionSubject</span><span style=\"color: navy\">, </span> IPSConditionSubject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span> <i>&quot;SetSubject&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryCondition.resource<b> as </b><span style=\"color: maroon\">IPSEntryConditionResource</span><span style=\"color: navy\">, </span> IPSEntryConditionResource.text<b> as </b><span style=\"color: maroon\">IPSEntryConditionResourceText</span><span style=\"color: navy\">, </span> IPSEntryConditionResourceText.status = <span style=\"color: blue\">'generated'</span><span style=\"color: navy\">, </span> IPSCondition.code<b> as </b><span style=\"color: maroon\">IPSConditionCode</span><span style=\"color: navy\">, </span> IPSConditionCode.coding<b> as </b><span style=\"color: maroon\">IPSConditionCodeCoding</span><span style=\"color: navy\">, </span> IPSConditionCodeCoding.code<b> as </b><span style=\"color: maroon\">IPSConditionCodeCodingCode</span><span style=\"color: navy\">, </span> IPSCondition.clinicalStatus<b> as </b><span style=\"color: maroon\">IPSConditionClinicalStatus</span><span style=\"color: navy\">, </span> IPSConditionClinicalStatus.coding<b> as </b><span style=\"color: maroon\">IPSConditionClinicalStatusCoding</span><span style=\"color: navy\">, </span> IPSConditionClinicalStatusCoding.code<b> as </b><span style=\"color: maroon\">IPSConditionClinicalStatusCodingCode</span><span style=\"color: navy\">, </span> IPSCondition.verificationStatus<b> as </b><span style=\"color: maroon\">IPSConditionVerificationStatus</span><span style=\"color: navy\">, </span> IPSConditionVerificationStatus.coding<b> as </b><span style=\"color: maroon\">IPSConditionVerificationStatusCoding</span><span style=\"color: navy\">, </span> IPSConditionVerificationStatusCoding.code<b> as </b><span style=\"color: maroon\">IPSConditionVerificationStatusCodingCode</span><span style=\"color: navy\">, </span> IPSEntryConditionResourceText.div = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;Condition'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSConditionCodeCodingCode</span><span style=\"color: navy\">, </span><span style=\"color: blue\">',clinicalStatus:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSConditionClinicalStatusCodingCode</span><span style=\"color: navy\">, </span><span style=\"color: blue\">',verificationStatus:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSConditionVerificationStatusCodingCode</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'&lt;/div&gt;'</span><span style=\"color: navy\">)</span> <i>&quot;SetConditionNarrativeElement&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryCondition.resource = <span style=\"color: maroon\">IPSCondition</span> <i>&quot;SetCondition&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;SetCondition&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;SetEmptyCondition&quot;</i><span style=\"color: navy\">;</span>\r\n    RNDSEntry<b> where </b>(RNDSEntry = 'empty')<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryAllergyIntolerance<b> then</b><span style=\"color: navy\"> {\r\n</span>      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> IPSEntryAllergyIntolerance.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span> <i>&quot;SetFullUrl&quot;</i><span style=\"color: navy\">;</span>\r\n      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span><b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'AllergyIntolerance'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSAllergyIntolerance</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'active'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSAllergyIntolerance.clinicalStatus = <span style=\"color: maroon\">cc</span> <i>&quot;SetClinicalStatus&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'no-allergy-info'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'No information about allergies'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSAllergyIntolerance.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSAllergyIntolerance.patient<b> as </b><span style=\"color: maroon\">IPSAllergyIntolerancePatient</span><span style=\"color: navy\">, </span> IPSAllergyIntolerancePatient.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span> <i>&quot;SetPatient&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryAllergyIntolerance.resource = <span style=\"color: maroon\">IPSAllergyIntolerance</span> <i>&quot;SetAllergyIntolerance&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSAllergyIntolerance.text<b> as </b><span style=\"color: maroon\">IPSAllergyIntoleranceText</span><span style=\"color: navy\">, </span> IPSAllergyIntoleranceText.status = <span style=\"color: blue\">'generated'</span><span style=\"color: navy\">, </span> IPSAllergyIntoleranceText.div = <span style=\"color: blue\">'&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;No allergy information&lt;/div&gt;'</span> <i>&quot;SetAllergyText&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;SetAllergyIntolerance&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;SetEmptyAllergyIntolerance&quot;</i><span style=\"color: navy\">;</span>\r\n    RNDSEntry<b> where </b>(RNDSEntry = 'empty')<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedicationStatement<b> then</b><span style=\"color: navy\"> {\r\n</span>      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span><b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'MedicationStatement'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSMedicationStatement</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSMedicationStatement.status = <span style=\"color: blue\">'unknown'</span> <i>&quot;SetStatus&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'no-medication-info'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'No information about medications'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSMedicationStatement.medication = <span style=\"color: maroon\">cc</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSMedicationStatement.effectivePeriod<b> as </b><span style=\"color: maroon\">IPSMedicationStatementEffectivePeriod</span><b> then </b>NotApplicable<span style=\"color: navy\">(</span><span style=\"color: maroon\">RNDSEntry</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSMedicationStatementEffectivePeriod</span><span style=\"color: navy\">)</span> <i>&quot;SetEffectivePeriod&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSMedicationStatement.subject<b> as </b><span style=\"color: maroon\">IPSMedicationStatementSubject</span><span style=\"color: navy\">, </span> IPSMedicationStatementSubject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span> <i>&quot;SetSubject&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> IPSEntryMedicationStatement.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryMedicationStatement.resource = <span style=\"color: maroon\">IPSMedicationStatement</span> <i>&quot;SetMedicationStatement&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;SetMedicationStatement&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;SetEmptyMedicationStatement&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;SetEmptyIPSEntries&quot;</i><span style=\"color: navy\">;</span>\r\n  src.entry<b> as </b><span style=\"color: maroon\">RNDSEntry</span><span style=\"color: navy\"><b> -&gt; </b></span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntry</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryCondition</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryVitalSigns</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryResults</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntrySpecimen</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryImmunization</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryProcedures</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryMedicationRequests</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryMedications</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryAllergyIntolerance</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryMedicationStatement</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryPatient</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryPractitioner</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">IPSEntryCustodian</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSPractitionerReference</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span><b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Composition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryResourceComposition</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceComposition.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'60591-5'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Patient Summary Document'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.type = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.date = <span style=\"color: navy\">(</span>now()<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <span style=\"color: navy\">(</span>today()<span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">today</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.title = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient Summary as of'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">today</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.confidentiality = <span style=\"color: blue\">'N'</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.text<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionText</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionText.status = <span style=\"color: blue\">'generated'</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionText.div = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;Title: International Patient Summary from Brazil, code: http://loinc.org#60591-5, status: generated, confidentiality: N&lt;/div&gt;'</span><span style=\"color: navy\">)</span> <i>&quot;SetCompositionFirstOrderFields&quot;</i><span style=\"color: navy\">;</span>\r\n      RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceComposition.subject<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSubject</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.author<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionPractitioner</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.custodian<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionCustodian</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionActiveProblems</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionMedications</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionAllergiesAndIntolerances</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionResults</span><span style=\"color: navy\">, </span> IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionVitalSigns</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que seta as referencias a subject, practitioner e custodian no composition</span>\r\n        RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSubject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionPractitioner.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionCustodian.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">)</span> <i>&quot;SetResourceCompositionReferences&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria a secao de problemas no composition</span>\r\n        RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionActiveProblems.title = <span style=\"color: blue\">'Active Problems'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'11450-4'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Problem list Reported'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionActiveProblems.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetActiveProblems&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria condition vazio quando nao ha conditions no bundle</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRCondicaoSaude').empty())<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryEmptyCondition</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryEmptyConditionId</span><span style=\"color: navy\">, </span> IPSEntryEmptyCondition.id = <span style=\"color: maroon\">IPSEntryEmptyConditionId</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-clinical'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'active'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryEmptyCondition.clinicalStatus = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'no-problem-info'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'No information about problems'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryEmptyCondition.code = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSEntryEmptyCondition.subject<b> as </b><span style=\"color: maroon\">IPSEntryEmptyConditionSubject</span><span style=\"color: navy\">, </span> IPSEntryEmptyConditionSubject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryCondition.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryEmptyConditionId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryCondition.resource = <span style=\"color: maroon\">IPSEntryEmptyCondition</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionActiveProblems.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionActiveProblemsEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionActiveProblemsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryEmptyConditionId</span><span style=\"color: navy\">)</span> <i>&quot;CreateNoKnownConditions&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria a secao de alergias no composition</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionAllergiesAndIntolerances.title = <span style=\"color: blue\">'Allergies and Intolerances'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'48765-2'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Allergies and adverse reactions Document'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionAllergiesAndIntolerances.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetAllergiesAndIntolerances&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria o Allergy Intolerance vazio quando nao ha allergy intolerance no bundle</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAlergiaReacaoAdversa').empty())<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'AllergyIntolerance'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryEmptyAllergyIntolerance</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryEmptyAllergyIntoleranceId</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntolerance.id = <span style=\"color: maroon\">IPSEntryEmptyAllergyIntoleranceId</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'active'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntolerance.clinicalStatus = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'no-allergy-info'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'No information about allergies'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntolerance.code = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntolerance.patient<b> as </b><span style=\"color: maroon\">IPSEntryEmptyAllergyIntolerancePatient</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntolerancePatient.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntolerance.text<b> as </b><span style=\"color: maroon\">IPSEntryEmptyAllergyIntoleranceText</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntoleranceText.status = <span style=\"color: blue\">'generated'</span><span style=\"color: navy\">, </span> IPSEntryEmptyAllergyIntoleranceText.div = <span style=\"color: blue\">'&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;No known allergies&lt;/div&gt;'</span><span style=\"color: navy\">, </span> IPSEntryAllergyIntolerance.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryEmptyAllergyIntoleranceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryAllergyIntolerance.resource = <span style=\"color: maroon\">IPSEntryEmptyAllergyIntolerance</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionAllergiesAndIntolerances.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryEmptyAllergyIntoleranceId</span><span style=\"color: navy\">)</span> <i>&quot;CreateNoKnownConditions&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria Medication Statement vazio quando nao ha medication statement no bundle</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedicamento').empty())<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'MedicationStatement'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryEmptyMedicationStatement</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSEntryEmptyMedicationStatementId</span><span style=\"color: navy\">, </span> IPSEntryEmptyMedicationStatement.id = <span style=\"color: maroon\">IPSEntryEmptyMedicationStatementId</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'no-medication-info'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'No information about medications'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryEmptyMedicationStatement.medication = <span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> IPSEntryEmptyMedicationStatement.status = <span style=\"color: blue\">'unknown'</span><span style=\"color: navy\">, </span> IPSEntryEmptyMedicationStatement.subject<b> as </b><span style=\"color: maroon\">IPSEntryEmptyMedicationStatementSubject</span><span style=\"color: navy\">, </span> IPSEntryEmptyMedicationStatementSubject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryMedicationStatement.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryEmptyMedicationStatementId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryMedicationStatement.resource = <span style=\"color: maroon\">IPSEntryEmptyMedicationStatement</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionMedications.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionMedicationEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionMedicationEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryEmptyMedicationStatementId</span><span style=\"color: navy\">)</span> <i>&quot;CreateNoKnownMedications&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria conditions BRCondicaoSaude</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRCondicaoSaude').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionActiveProblems.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionActiveProblemsEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionActiveProblemsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria alergias BRAlergiaReacaoAdversa</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAlergiaReacaoAdversa').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionAllergiesAndIntolerances.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria Secao de REL</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoCOVID19-TesteRapido') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoLaboratorioClinico') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRObservacaoDescritiva')).empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceComposition<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionResults<b> then</b><span style=\"color: navy\"> {\r\n</span>            <span style=\"color: navy\">// </span><span style=\"color: green\">cria section de results no composition</span>\r\n            RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionResults<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionResults.title = <span style=\"color: blue\">'Results'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'30954-2'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Relevant diagnostic tests/laboratory data Narrative'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionResults.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetResultsNarrative&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;SetCompositionSectionResults&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;CreateSectionResults&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;CreateSectionResultsIfExist&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que mapeia REL</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoCOVID19-TesteRapido') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoLaboratorioClinico') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRObservacaoDescritiva')).empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionResults.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionResultsEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionResultsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que mapeia BRAmostraBiologica-1.0</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria Secao de Vital Signs</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedidaObservada').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceComposition<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionVitalSigns<b> then</b><span style=\"color: navy\"> {\r\n</span>            <span style=\"color: navy\">// </span><span style=\"color: green\">cria section de results no composition</span>\r\n            RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionVitalSigns<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionVitalSigns.title = <span style=\"color: blue\">'Vital Signs'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'8716-3'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'Vital signs'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionVitalSigns.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetResultsNarrative&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;SetCompositionSectionResults&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;CreateSectionResults&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;CreateSectionResultsIfExist&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria Vital Signs</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedidaObservada').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionVitalSigns.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionVitalSignsEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionVitalSignsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria secao de Imunizacao</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministrado') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCarga') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCampanha')).empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceComposition<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionImmunizations</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            <span style=\"color: navy\">// </span><span style=\"color: green\">cria section de immunizations no composition</span>\r\n            RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionImmunizations<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionImmunizations.title = <span style=\"color: blue\">'Immunizations'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'11369-6'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'History of Immunization Narrative'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionImmunizations.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetImmunizationsNarrative&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;SetCompositionSectionImmunizations&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que mapeia BRImunobiologicoAdministrado-2.0, BRImunobiologicoAdministradoCampanha-1.0 e BRImunobiologicoAdministradoCarga-2.0</span>\r\n            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministrado') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCarga') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCampanha')).empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionImmunizations.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionImmunizationsEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionImmunizationsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;CreateSectionImmunizations&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;CreateSectionImmunizationsIfExists&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">http://www.saude.gov.br/fhir/r4/StructureDefinition/BRProcedimentoRealizado-1.0</span>\r\n        RNDSEntryResource<b> where </b>(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRProcedimentoRealizado').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceComposition<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceComposition.section<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionProcedures</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            <span style=\"color: navy\">// </span><span style=\"color: green\">cria section de procedures no composition</span>\r\n            RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionProcedures<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionProcedures.title = <span style=\"color: blue\">'History of procedures'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'47519-4'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'History of Procedures Narrative'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionProcedures.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetProceduresNarrative&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;SetCompositionSectionProcedures&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que mapeia BRImunobiologicoAdministrado-2.0, BRImunobiologicoAdministradoCampanha-1.0 e BRImunobiologicoAdministradoCarga-2.0</span>\r\n            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRProcedimentoRealizado').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>tgt.entry<b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionProcedures.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionProceduresEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionProceduresEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;CreateSectionProcedures&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;CreateSectionProceduresIfExists&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">cria section de medications no composition</span>\r\n        RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryResourceCompositionSectionMedications<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntryResource<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionMedications.title = <span style=\"color: blue\">'Medication'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'10160-0'</span><span style=\"color: navy\">, </span> c.display = <span style=\"color: blue\">'History of Medication use Narrative'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionMedications.code = <span style=\"color: maroon\">cc</span> <i>&quot;SetMedicationsNarrative&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">// </span><span style=\"color: green\">http://www.saude.gov.br/fhir/r4/StructureDefinition/BRPrescricaoMedicamento</span>\r\n          RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedicationRequests<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedicationRequests<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRPrescricaoMedicamento').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedicationRequests.resource<b> as </b><span style=\"color: maroon\">IPSEntryMedicationRequestsResource</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceCompositionSectionMedications.entry<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionSectionMedicationsEntry</span><span style=\"color: navy\">, </span> IPSEntryResourceCompositionSectionMedicationsEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">// </span><span style=\"color: green\">http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedicamento</span>\r\n          RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedications<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedications<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedicamento').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryMedications.resource<b> as </b><span style=\"color: maroon\">IPSEntryMedicationsResource</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> tgt.entry<b> as </b><span style=\"color: maroon\">AddEntry</span><span style=\"color: navy\">, </span> AddEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResourceId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> AddEntry.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;AddEntry&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;SetResource&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;SetCompositionSectionMedications&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria Patient</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient<b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntry</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient<b> then</b><span style=\"color: navy\"> {\r\n</span>              RNDSEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResource</span><span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient<b> then</b><span style=\"color: navy\"> {\r\n</span>                RNDSEntryResourceEntryResource.entry<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntry</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                  RNDSEntryResourceEntryResourceEntry.resource<b> as </b><span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span><b> where </b>(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRIndividuo').empty().not())<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient.resource<b> as </b><span style=\"color: maroon\">IPSEntryPatientResource</span><b> then</b><span style=\"color: navy\"> {\r\n</span>                    RNDSEntryResourceEntryResourceEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPatientReference</span><span style=\"color: navy\">)</span> <i>&quot;SetPatientFullUrl&quot;</i><span style=\"color: navy\">;</span>\r\n                    RNDSEntryResourceEntryResourceEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatient.resource = <span style=\"color: maroon\">RNDSEntryResourceEntryResourceEntryResource</span> <i>&quot;SetPatientResource&quot;</i><span style=\"color: navy\">;</span>\r\n                    RNDSEntryResourceEntryResourceEntryResource<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPatientResource.id = <span style=\"color: maroon\">IPSPatientReference</span> <i>&quot;SetPatientId&quot;</i><span style=\"color: navy\">;</span>\r\n                  <span style=\"color: navy\">}</span> <i>&quot;SetPatient&quot;</i><span style=\"color: navy\">;</span>\r\n                <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n              <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n            <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResourceEntry&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntryResource&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;IterateRNDSEntry&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">Bloco que cria organization para author e custodian</span>\r\n        RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPractitioner<b> then</b><span style=\"color: navy\"> {\r\n</span>          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSEntryPractitioner.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">)</span> <i>&quot;SetFullUrl&quot;</i><span style=\"color: navy\">;</span>\r\n          RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span><b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Organization'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSOrganization</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSOrganization.id = <span style=\"color: maroon\">IPSPractitionerReference</span> <i>&quot;SetId&quot;</i><span style=\"color: navy\">;</span>\r\n            RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Identifier'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">IPSPractitionerIdentifier</span><span style=\"color: navy\">, </span> IPSPractitionerIdentifier.system = <span style=\"color: blue\">'http://www.saude.gov.br/fhir/r4/NamingSystem/cnpj'</span><span style=\"color: navy\">, </span> IPSPractitionerIdentifier.value = <span style=\"color: blue\">'00394544000185'</span><span style=\"color: navy\">, </span> IPSOrganization.identifier = <span style=\"color: maroon\">IPSPractitionerIdentifier</span> <i>&quot;SetIdentifier&quot;</i><span style=\"color: navy\">;</span>\r\n            RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span>IPSOrganization.name = <span style=\"color: blue\">'Ministrio da Sade do Brasil'</span> <i>&quot;SetName&quot;</i><span style=\"color: navy\">;</span>\r\n            RNDSEntry<span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryPractitioner.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSPractitionerReference</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntryPractitioner.resource = <span style=\"color: maroon\">IPSOrganization</span> <i>&quot;SetAuthor&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;SetAuthor&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;SetEmptyAuthor&quot;</i><span style=\"color: navy\">;</span>\r\n        RNDSEntryResource.id<b> as </b><span style=\"color: maroon\">RNDSEntryResourceId</span><span style=\"color: navy\"><b> -&gt; </b></span> IPSEntryResourceComposition.id<b> as </b><span style=\"color: maroon\">IPSEntryResourceCompositionId</span><span style=\"color: navy\">, </span> IPSEntry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">IPSEntryResourceCompositionId</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> IPSEntry.resource = <span style=\"color: maroon\">IPSEntryResourceComposition</span> <i>&quot;SetResourceComposition&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;SetSubjectAuthorCustodianSection&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;SetIPSEntryResourceComposition&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;SetIPSEntries&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>DataAbsentReason<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span><span style=\"color: navy\"> : </span>Element, <b>target</b> <span style=\"color: maroon\">tgt</span><span style=\"color: navy\"> : </span>Element<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  src<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Extension'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">TgtExtension</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'code'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.value = <span style=\"color: blue\">'unknown'</span><span style=\"color: navy\">, </span> TgtExtension.url = <span style=\"color: blue\">'http://hl7.org/fhir/StructureDefinition/data-absent-reason'</span><span style=\"color: navy\">, </span> TgtExtension.value = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> tgt.extension = <span style=\"color: maroon\">TgtExtension</span> <i>&quot;SetExtension&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>NotApplicable<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span><span style=\"color: navy\"> : </span>Element, <b>target</b> <span style=\"color: maroon\">tgt</span><span style=\"color: navy\"> : </span>Element<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  src<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Extension'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">TgtExtension</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'code'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.value = <span style=\"color: blue\">'not-applicable'</span><span style=\"color: navy\">, </span> TgtExtension.url = <span style=\"color: blue\">'http://hl7.org/fhir/StructureDefinition/data-absent-reason'</span><span style=\"color: navy\">, </span> TgtExtension.value = <span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> tgt.extension = <span style=\"color: maroon\">TgtExtension</span> <i>&quot;SetExtension&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span></pre></div>"},"url":"https://ips.saude.gov.br/fhir/StructureMap/StructureMapBRIPS","version":"1.0.0","name":"StructureMapBRIPS","title":"Mapeamento de Bundle da RNDS para o IPS","status":"draft","date":"2024-12-23T18:46:21+00:00","publisher":"Ministrio do Sade do Brasil","contact":[{"name":"Ministrio do Sade do Brasil","telecom":[{"system":"url","value":"https://gov.br/saude"},{"system":"email","value":"contato@gointerop.com"}]},{"name":"Italo Macedo","telecom":[{"system":"email","value":"italo@gointerop.com","use":"work"}]}],"description":"Mapeamento de Bundle da RNDS para o IPS","jurisdiction":[{"coding":[{"system":"urn:iso:std:iso:3166","code":"BR","display":"Brazil"}]}],"structure":[{"url":"http://hl7.org/fhir/StructureDefinition/Bundle","mode":"source","alias":"TLeft"},{"url":"http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips","mode":"target","alias":"TRight"}],"group":[{"name":"RNDSIPSBundle","typeMode":"none","input":[{"name":"src","type":"TLeft","mode":"source"},{"name":"tgt","type":"TRight","mode":"target"}],"rule":[{"name":"SetBundleMetaData","source":[{"context":"src","element":"id","variable":"RNDSID"}],"target":[{"context":"tgt","contextType":"variable","variable":"IPS"}],"rule":[{"name":"SetMetaData","source":[{"context":"RNDSID"}],"target":[{"context":"tgt","contextType":"variable","element":"identifier","variable":"IPSIdentifier"}],"rule":[{"name":"SetDocumentTypeAndTimestampAndIdentifier","source":[{"context":"RNDSID"}],"target":[{"context":"IPS","contextType":"variable","element":"type","transform":"copy","parameter":[{"valueString":"document"}]},{"context":"IPS","contextType":"variable","element":"timestamp","transform":"evaluate","parameter":[{"valueString":"now()"}]},{"context":"IPSIdentifier","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"urn:ietf:rfc:3986"}]},{"contextType":"variable","variable":"uuid","transform":"uuid"},{"context":"IPSIdentifier","contextType":"variable","element":"value","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"uuid"}]}]}]}]},{"name":"SetEmptyIPSEntries","source":[{"context":"src","defaultValueString":"empty","element":"entry","variable":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntry"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryCondition"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryAllergyIntolerance"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryMedicationStatement"},{"contextType":"variable","variable":"IPSPatientReference","transform":"uuid"},{"contextType":"variable","variable":"IPSPractitionerReference","transform":"uuid"},{"contextType":"variable","variable":"IPSConditionNoKnownProblemsReference","transform":"uuid"},{"contextType":"variable","variable":"IPSMedicationStatementNoKnownMedicationsReference","transform":"uuid"},{"contextType":"variable","variable":"IPSAllergyIntoleranceNoKnownAllergiesReference","transform":"uuid"},{"contextType":"variable","variable":"IPSVitalSignsNoKnownVitalSignsReference","transform":"uuid"}],"rule":[{"name":"SetEmptyComposition","source":[{"context":"RNDSEntry","condition":"(RNDSEntry = 'empty')"}],"target":[{"context":"IPSEntry","contextType":"variable"}],"rule":[{"name":"SetFullUrl","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"uuid","transform":"uuid"},{"context":"IPSEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"uuid"}]}]},{"name":"SetComposition","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"IPSComposition","transform":"create","parameter":[{"valueString":"Composition"}]}],"rule":[{"name":"SetCompositionFirstOrderFields","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSComposition","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"final"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"60591-5"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Patient Summary Document"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSComposition","contextType":"variable","element":"type","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSComposition","contextType":"variable","element":"date","transform":"evaluate","parameter":[{"valueString":"now()"}]},{"context":"IPSComposition","contextType":"variable","element":"id","transform":"uuid"},{"contextType":"variable","variable":"today","transform":"evaluate","parameter":[{"valueString":"today()"}]},{"context":"IPSComposition","contextType":"variable","element":"title","transform":"append","parameter":[{"valueString":"Patient Summary as of:"},{"valueId":"today"}]},{"context":"IPSComposition","contextType":"variable","element":"confidentiality","transform":"copy","parameter":[{"valueString":"N"}]},{"context":"IPSComposition","contextType":"variable","element":"text","variable":"IPSCompositionText"},{"context":"IPSCompositionText","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"generated"}]},{"context":"IPSCompositionText","contextType":"variable","element":"div","transform":"append","parameter":[{"valueString":"<div xmlns=\"http://www.w3.org/1999/xhtml\">Title: International Patient Summary from Brazil, code: http://loinc.org#60591-5, status: generated, confidentiality: N</div>"}]}]},{"name":"SetSubjectAuthorCustodianSection","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSComposition","contextType":"variable","element":"subject","variable":"IPSCompositionSubject"},{"context":"IPSComposition","contextType":"variable","element":"author","variable":"IPSCompositionAuthor"},{"context":"IPSComposition","contextType":"variable","element":"custodian","variable":"IPSCompositionCustodian"},{"context":"IPSComposition","contextType":"variable","element":"section","variable":"IPSCompositionSectionActiveProblems"},{"context":"IPSComposition","contextType":"variable","element":"section","variable":"IPSCompositionMedication"},{"context":"IPSComposition","contextType":"variable","element":"section","variable":"IPSCompositionAllergiesAndIntolerances"},{"context":"IPSComposition","contextType":"variable","element":"section","variable":"IPSCompositionVitalSigns"}],"rule":[{"name":"SetReferences","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSCompositionSubject","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]},{"context":"IPSCompositionAuthor","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPractitionerReference"}]},{"context":"IPSCompositionCustodian","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPractitionerReference"}]}]},{"name":"SetActiveProblems","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSCompositionSectionActiveProblems","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Active Problems"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"11450-4"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Problem list Reported"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCompositionSectionActiveProblems","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSCompositionSectionActiveProblems","contextType":"variable","element":"entry","variable":"IPSCompositionSectionActiveProblemsEntry"},{"context":"IPSCompositionSectionActiveProblemsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSConditionNoKnownProblemsReference"}]}]},{"name":"SetTitleMedications","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSCompositionMedication","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Medications"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"10160-0"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"History of Medication use Narrative"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCompositionMedication","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSCompositionMedication","contextType":"variable","element":"entry","variable":"IPSCompositionSectionMedicationEntry"},{"context":"IPSCompositionSectionMedicationEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSMedicationStatementNoKnownMedicationsReference"}]}]},{"name":"SetAllergiesAndIntolerances","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSCompositionAllergiesAndIntolerances","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Allergies and Intolerances"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"48765-2"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Allergies and adverse reactions Document"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCompositionAllergiesAndIntolerances","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSCompositionAllergiesAndIntolerances","contextType":"variable","element":"entry","variable":"IPSCompositionSectionAllergiesAndIntolerancesEntry"},{"context":"IPSCompositionSectionAllergiesAndIntolerancesEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSAllergyIntoleranceNoKnownAllergiesReference"}]}]},{"name":"SetVitalSigns","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSCompositionVitalSigns","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Vital Signs"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"8716-3"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Vital signs"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCompositionVitalSigns","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSCompositionVitalSigns","contextType":"variable","element":"entry","variable":"IPSCompositionVitalSignsEntry"},{"context":"IPSCompositionVitalSignsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSVitalSignsNoKnownVitalSignsReference"}]}]}]},{"name":"SetResourceComposition","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSComposition"}]}]}]}]},{"name":"SetEmptyCondition","source":[{"context":"RNDSEntry","condition":"(RNDSEntry = 'empty')"}],"target":[{"context":"IPSEntryCondition","contextType":"variable"}],"rule":[{"name":"SetFullUrl","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"uuid","transform":"uuid"},{"context":"IPSEntryCondition","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"uuid"}]}]},{"name":"SetCondition","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"IPSCondition","transform":"create","parameter":[{"valueString":"Condition"}]}],"rule":[{"name":"SetClinicalStatus","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://terminology.hl7.org/CodeSystem/condition-clinical"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"active"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCondition","contextType":"variable","element":"clinicalStatus","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"SetCode","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"no-problem-info"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"No information about problems"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCondition","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"SetCode","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://terminology.hl7.org/CodeSystem/condition-ver-status"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"confirmed"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Confirmed"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSCondition","contextType":"variable","element":"verificationStatus","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"SetSubject","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSCondition","contextType":"variable","element":"subject","variable":"IPSConditionSubject"},{"context":"IPSConditionSubject","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]}]},{"name":"SetConditionNarrativeElement","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryCondition","contextType":"variable","element":"resource","variable":"IPSEntryConditionResource"},{"context":"IPSEntryConditionResource","contextType":"variable","element":"text","variable":"IPSEntryConditionResourceText"},{"context":"IPSEntryConditionResourceText","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"generated"}]},{"context":"IPSCondition","contextType":"variable","element":"code","variable":"IPSConditionCode"},{"context":"IPSConditionCode","contextType":"variable","element":"coding","variable":"IPSConditionCodeCoding"},{"context":"IPSConditionCodeCoding","contextType":"variable","element":"code","variable":"IPSConditionCodeCodingCode"},{"context":"IPSCondition","contextType":"variable","element":"clinicalStatus","variable":"IPSConditionClinicalStatus"},{"context":"IPSConditionClinicalStatus","contextType":"variable","element":"coding","variable":"IPSConditionClinicalStatusCoding"},{"context":"IPSConditionClinicalStatusCoding","contextType":"variable","element":"code","variable":"IPSConditionClinicalStatusCodingCode"},{"context":"IPSCondition","contextType":"variable","element":"verificationStatus","variable":"IPSConditionVerificationStatus"},{"context":"IPSConditionVerificationStatus","contextType":"variable","element":"coding","variable":"IPSConditionVerificationStatusCoding"},{"context":"IPSConditionVerificationStatusCoding","contextType":"variable","element":"code","variable":"IPSConditionVerificationStatusCodingCode"},{"context":"IPSEntryConditionResourceText","contextType":"variable","element":"div","transform":"append","parameter":[{"valueString":"<div xmlns=\"http://www.w3.org/1999/xhtml\">Condition"},{"valueId":"IPSConditionCodeCodingCode"},{"valueString":",clinicalStatus:"},{"valueId":"IPSConditionClinicalStatusCodingCode"},{"valueString":",verificationStatus:"},{"valueId":"IPSConditionVerificationStatusCodingCode"},{"valueString":"</div>"}]}]},{"name":"SetCondition","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryCondition","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSCondition"}]}]}]}]},{"name":"SetEmptyAllergyIntolerance","source":[{"context":"RNDSEntry","condition":"(RNDSEntry = 'empty')"}],"target":[{"context":"IPSEntryAllergyIntolerance","contextType":"variable"}],"rule":[{"name":"SetFullUrl","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"uuid","transform":"uuid"},{"context":"IPSEntryAllergyIntolerance","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"uuid"}]}]},{"name":"SetAllergyIntolerance","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"IPSAllergyIntolerance","transform":"create","parameter":[{"valueString":"AllergyIntolerance"}]}],"rule":[{"name":"SetClinicalStatus","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"active"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSAllergyIntolerance","contextType":"variable","element":"clinicalStatus","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"SetCode","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"no-allergy-info"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"No information about allergies"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSAllergyIntolerance","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"SetPatient","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSAllergyIntolerance","contextType":"variable","element":"patient","variable":"IPSAllergyIntolerancePatient"},{"context":"IPSAllergyIntolerancePatient","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]}]},{"name":"SetAllergyIntolerance","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryAllergyIntolerance","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSAllergyIntolerance"}]}]},{"name":"SetAllergyText","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSAllergyIntolerance","contextType":"variable","element":"text","variable":"IPSAllergyIntoleranceText"},{"context":"IPSAllergyIntoleranceText","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"generated"}]},{"context":"IPSAllergyIntoleranceText","contextType":"variable","element":"div","transform":"copy","parameter":[{"valueString":"<div xmlns=\"http://www.w3.org/1999/xhtml\">No allergy information</div>"}]}]}]}]},{"name":"SetEmptyMedicationStatement","source":[{"context":"RNDSEntry","condition":"(RNDSEntry = 'empty')"}],"target":[{"context":"IPSEntryMedicationStatement","contextType":"variable"}],"rule":[{"name":"SetMedicationStatement","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"IPSMedicationStatement","transform":"create","parameter":[{"valueString":"MedicationStatement"}]}],"rule":[{"name":"SetStatus","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSMedicationStatement","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"unknown"}]}]},{"name":"SetCode","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"no-medication-info"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"No information about medications"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSMedicationStatement","contextType":"variable","element":"medication","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"SetEffectivePeriod","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSMedicationStatement","contextType":"variable","element":"effectivePeriod","variable":"IPSMedicationStatementEffectivePeriod"}],"dependent":[{"name":"NotApplicable","variable":["RNDSEntry","IPSMedicationStatementEffectivePeriod"]}]},{"name":"SetSubject","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSMedicationStatement","contextType":"variable","element":"subject","variable":"IPSMedicationStatementSubject"},{"context":"IPSMedicationStatementSubject","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]}]},{"name":"SetMedicationStatement","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"uuid","transform":"uuid"},{"context":"IPSEntryMedicationStatement","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"uuid"}]},{"context":"IPSEntryMedicationStatement","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSMedicationStatement"}]}]}]}]}]},{"name":"SetIPSEntries","source":[{"context":"src","element":"entry","variable":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntry"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryCondition"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryVitalSigns"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryResults"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntrySpecimen"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryImmunization"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryProcedures"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryMedicationRequests"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryMedications"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryAllergyIntolerance"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryMedicationStatement"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryPatient"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryPractitioner"},{"context":"tgt","contextType":"variable","element":"entry","variable":"IPSEntryCustodian"},{"contextType":"variable","variable":"IPSPatientReference","transform":"uuid"},{"contextType":"variable","variable":"IPSPractitionerReference","transform":"uuid"}],"rule":[{"name":"SetIPSEntryResourceComposition","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"contextType":"variable","variable":"IPSEntryResourceComposition","transform":"create","parameter":[{"valueString":"Composition"}]}],"rule":[{"name":"SetCompositionFirstOrderFields","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"final"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"60591-5"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Patient Summary Document"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"type","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"date","transform":"evaluate","parameter":[{"valueString":"now()"}]},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"id","transform":"uuid"},{"contextType":"variable","variable":"today","transform":"evaluate","parameter":[{"valueString":"today()"}]},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"title","transform":"append","parameter":[{"valueString":"Patient Summary as of"},{"valueId":"today"}]},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"confidentiality","transform":"copy","parameter":[{"valueString":"N"}]},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"text","variable":"IPSEntryResourceCompositionText"},{"context":"IPSEntryResourceCompositionText","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"generated"}]},{"context":"IPSEntryResourceCompositionText","contextType":"variable","element":"div","transform":"append","parameter":[{"valueString":"<div xmlns=\"http://www.w3.org/1999/xhtml\">Title: International Patient Summary from Brazil, code: http://loinc.org#60591-5, status: generated, confidentiality: N</div>"}]}]},{"name":"SetSubjectAuthorCustodianSection","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable","element":"subject","variable":"IPSEntryResourceCompositionSubject"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"author","variable":"IPSEntryResourceCompositionPractitioner"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"custodian","variable":"IPSEntryResourceCompositionCustodian"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionActiveProblems"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionMedications"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionAllergiesAndIntolerances"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionResults"},{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionVitalSigns"}],"rule":[{"name":"SetResourceCompositionReferences","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSubject","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]},{"context":"IPSEntryResourceCompositionPractitioner","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPractitionerReference"}]},{"context":"IPSEntryResourceCompositionCustodian","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPractitionerReference"}]}]},{"name":"SetActiveProblems","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionActiveProblems","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Active Problems"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"11450-4"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Problem list Reported"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionActiveProblems","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"CreateNoKnownConditions","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRCondicaoSaude').empty())"}],"target":[{"contextType":"variable","variable":"IPSEntryEmptyCondition","transform":"create","parameter":[{"valueString":"Condition"}]},{"contextType":"variable","variable":"IPSEntryEmptyConditionId","transform":"uuid"},{"context":"IPSEntryEmptyCondition","contextType":"variable","element":"id","transform":"copy","parameter":[{"valueId":"IPSEntryEmptyConditionId"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://terminology.hl7.org/CodeSystem/condition-clinical"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"active"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryEmptyCondition","contextType":"variable","element":"clinicalStatus","transform":"copy","parameter":[{"valueId":"cc"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"no-problem-info"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"No information about problems"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryEmptyCondition","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSEntryEmptyCondition","contextType":"variable","element":"subject","variable":"IPSEntryEmptyConditionSubject"},{"context":"IPSEntryEmptyConditionSubject","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]},{"context":"IPSEntryCondition","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryEmptyConditionId"}]},{"context":"IPSEntryCondition","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSEntryEmptyCondition"}]},{"context":"IPSEntryResourceCompositionSectionActiveProblems","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionActiveProblemsEntry"},{"context":"IPSEntryResourceCompositionSectionActiveProblemsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryEmptyConditionId"}]}]},{"name":"SetAllergiesAndIntolerances","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryResourceCompositionSectionAllergiesAndIntolerances","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Allergies and Intolerances"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"48765-2"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Allergies and adverse reactions Document"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionAllergiesAndIntolerances","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"CreateNoKnownConditions","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAlergiaReacaoAdversa').empty())"}],"target":[{"contextType":"variable","variable":"IPSEntryEmptyAllergyIntolerance","transform":"create","parameter":[{"valueString":"AllergyIntolerance"}]},{"contextType":"variable","variable":"IPSEntryEmptyAllergyIntoleranceId","transform":"uuid"},{"context":"IPSEntryEmptyAllergyIntolerance","contextType":"variable","element":"id","transform":"copy","parameter":[{"valueId":"IPSEntryEmptyAllergyIntoleranceId"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"active"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryEmptyAllergyIntolerance","contextType":"variable","element":"clinicalStatus","transform":"copy","parameter":[{"valueId":"cc"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"no-allergy-info"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"No information about allergies"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryEmptyAllergyIntolerance","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSEntryEmptyAllergyIntolerance","contextType":"variable","element":"patient","variable":"IPSEntryEmptyAllergyIntolerancePatient"},{"context":"IPSEntryEmptyAllergyIntolerancePatient","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]},{"context":"IPSEntryEmptyAllergyIntolerance","contextType":"variable","element":"text","variable":"IPSEntryEmptyAllergyIntoleranceText"},{"context":"IPSEntryEmptyAllergyIntoleranceText","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"generated"}]},{"context":"IPSEntryEmptyAllergyIntoleranceText","contextType":"variable","element":"div","transform":"copy","parameter":[{"valueString":"<div xmlns=\"http://www.w3.org/1999/xhtml\">No known allergies</div>"}]},{"context":"IPSEntryAllergyIntolerance","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryEmptyAllergyIntoleranceId"}]},{"context":"IPSEntryAllergyIntolerance","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSEntryEmptyAllergyIntolerance"}]},{"context":"IPSEntryResourceCompositionSectionAllergiesAndIntolerances","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry"},{"context":"IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryEmptyAllergyIntoleranceId"}]}]},{"name":"CreateNoKnownMedications","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedicamento').empty())"}],"target":[{"contextType":"variable","variable":"IPSEntryEmptyMedicationStatement","transform":"create","parameter":[{"valueString":"MedicationStatement"}]},{"contextType":"variable","variable":"IPSEntryEmptyMedicationStatementId","transform":"uuid"},{"context":"IPSEntryEmptyMedicationStatement","contextType":"variable","element":"id","transform":"copy","parameter":[{"valueId":"IPSEntryEmptyMedicationStatementId"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/uv/ips/CodeSystem/absent-unknown-uv-ips"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"no-medication-info"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"No information about medications"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryEmptyMedicationStatement","contextType":"variable","element":"medication","transform":"copy","parameter":[{"valueId":"cc"}]},{"context":"IPSEntryEmptyMedicationStatement","contextType":"variable","element":"status","transform":"copy","parameter":[{"valueString":"unknown"}]},{"context":"IPSEntryEmptyMedicationStatement","contextType":"variable","element":"subject","variable":"IPSEntryEmptyMedicationStatementSubject"},{"context":"IPSEntryEmptyMedicationStatementSubject","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]},{"context":"IPSEntryMedicationStatement","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryEmptyMedicationStatementId"}]},{"context":"IPSEntryMedicationStatement","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSEntryEmptyMedicationStatement"}]},{"context":"IPSEntryResourceCompositionSectionMedications","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionMedicationEntry"},{"context":"IPSEntryResourceCompositionSectionMedicationEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryEmptyMedicationStatementId"}]}]},{"name":"IterateRNDSEntry","source":[{"context":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResource","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRCondicaoSaude').empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionActiveProblems","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionActiveProblemsEntry"},{"context":"IPSEntryResourceCompositionSectionActiveProblemsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"IterateRNDSEntry","source":[{"context":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResource","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAlergiaReacaoAdversa').empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionAllergiesAndIntolerances","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry"},{"context":"IPSEntryResourceCompositionSectionAllergiesAndIntolerancesEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"CreateSectionResultsIfExist","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoCOVID19-TesteRapido') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoLaboratorioClinico') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRObservacaoDescritiva')).empty().not())"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable"}],"rule":[{"name":"CreateSectionResults","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryResourceCompositionSectionResults","contextType":"variable"}],"rule":[{"name":"SetCompositionSectionResults","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionResults","contextType":"variable"}],"rule":[{"name":"SetResultsNarrative","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionResults","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Results"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"30954-2"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Relevant diagnostic tests/laboratory data Narrative"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionResults","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]}]}]}]},{"name":"IterateRNDSEntry","source":[{"context":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResource","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoCOVID19-TesteRapido') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRDiagnosticoLaboratorioClinico') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRObservacaoDescritiva')).empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionResults","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionResultsEntry"},{"context":"IPSEntryResourceCompositionSectionResultsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"IterateRNDSEntry","source":[{"context":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResource","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica').empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"CreateSectionResultsIfExist","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedidaObservada').empty().not())"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable"}],"rule":[{"name":"CreateSectionResults","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryResourceCompositionSectionVitalSigns","contextType":"variable"}],"rule":[{"name":"SetCompositionSectionResults","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionVitalSigns","contextType":"variable"}],"rule":[{"name":"SetResultsNarrative","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionVitalSigns","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Vital Signs"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"8716-3"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"Vital signs"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionVitalSigns","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]}]}]}]},{"name":"IterateRNDSEntry","source":[{"context":"RNDSEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResource","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedidaObservada').empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionVitalSigns","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionVitalSignsEntry"},{"context":"IPSEntryResourceCompositionSectionVitalSignsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"CreateSectionImmunizationsIfExists","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministrado') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCarga') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCampanha')).empty().not())"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable"}],"rule":[{"name":"CreateSectionImmunizations","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionImmunizations"}],"rule":[{"name":"SetCompositionSectionImmunizations","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionImmunizations","contextType":"variable"}],"rule":[{"name":"SetImmunizationsNarrative","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionImmunizations","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Immunizations"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"11369-6"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"History of Immunization Narrative"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionImmunizations","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]}]},{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where((profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministrado') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCarga') or (profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRImunobiologicoAdministradoCampanha')).empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionImmunizations","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionImmunizationsEntry"},{"context":"IPSEntryResourceCompositionSectionImmunizationsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"CreateSectionProceduresIfExists","source":[{"context":"RNDSEntryResource","condition":"(RNDSEntryResource.entry.resource.entry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRProcedimentoRealizado').empty().not())"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable"}],"rule":[{"name":"CreateSectionProcedures","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable","element":"section","variable":"IPSEntryResourceCompositionSectionProcedures"}],"rule":[{"name":"SetCompositionSectionProcedures","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionProcedures","contextType":"variable"}],"rule":[{"name":"SetProceduresNarrative","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionProcedures","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"History of procedures"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"47519-4"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"History of Procedures Narrative"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionProcedures","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]}]},{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRProcedimentoRealizado').empty().not())"}],"target":[{"context":"tgt","contextType":"variable","element":"entry"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionProcedures","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionProceduresEntry"},{"context":"IPSEntryResourceCompositionSectionProceduresEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]}]},{"name":"SetCompositionSectionMedications","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionMedications","contextType":"variable"}],"rule":[{"name":"SetMedicationsNarrative","source":[{"context":"RNDSEntryResource"}],"target":[{"context":"IPSEntryResourceCompositionSectionMedications","contextType":"variable","element":"title","transform":"copy","parameter":[{"valueString":"Medication"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"Coding"}]},{"context":"c","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://loinc.org"}]},{"context":"c","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueString":"10160-0"}]},{"context":"c","contextType":"variable","element":"display","transform":"copy","parameter":[{"valueString":"History of Medication use Narrative"}]},{"contextType":"variable","variable":"cc","transform":"create","parameter":[{"valueString":"CodeableConcept"}]},{"context":"cc","contextType":"variable","element":"coding","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"IPSEntryResourceCompositionSectionMedications","contextType":"variable","element":"code","transform":"copy","parameter":[{"valueId":"cc"}]}]},{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"IPSEntryMedicationRequests","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"IPSEntryMedicationRequests","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRPrescricaoMedicamento').empty().not())"}],"target":[{"context":"IPSEntryMedicationRequests","contextType":"variable","element":"resource","variable":"IPSEntryMedicationRequestsResource"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"IPSEntryResourceCompositionSectionMedications","contextType":"variable","element":"entry","variable":"IPSEntryResourceCompositionSectionMedicationsEntry"},{"context":"IPSEntryResourceCompositionSectionMedicationsEntry","contextType":"variable","element":"reference","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]},{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"IPSEntryMedications","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"IPSEntryMedications","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetResource","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRMedicamento').empty().not())"}],"target":[{"context":"IPSEntryMedications","contextType":"variable","element":"resource","variable":"IPSEntryMedicationsResource"}],"rule":[{"name":"AddEntry","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource","element":"id","variable":"RNDSEntryResourceEntryResourceEntryResourceId"}],"target":[{"context":"tgt","contextType":"variable","element":"entry","variable":"AddEntry"},{"context":"AddEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"RNDSEntryResourceEntryResourceEntryResourceId"}]},{"context":"AddEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]}]}]}]}]}]},{"name":"IterateRNDSEntry","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryPatient","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResource","source":[{"context":"RNDSEntry","element":"resource","variable":"RNDSEntryResource"}],"target":[{"context":"IPSEntryPatient","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntry","source":[{"context":"RNDSEntryResource","element":"entry","variable":"RNDSEntryResourceEntry"}],"target":[{"context":"IPSEntryPatient","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResource","source":[{"context":"RNDSEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResource"}],"target":[{"context":"IPSEntryPatient","contextType":"variable"}],"rule":[{"name":"IterateRNDSEntryResourceEntryResourceEntry","source":[{"context":"RNDSEntryResourceEntryResource","element":"entry","variable":"RNDSEntryResourceEntryResourceEntry"}],"rule":[{"name":"SetPatient","source":[{"context":"RNDSEntryResourceEntryResourceEntry","element":"resource","variable":"RNDSEntryResourceEntryResourceEntryResource","condition":"(RNDSEntryResourceEntryResourceEntry.resource.meta.where(profile = 'http://www.saude.gov.br/fhir/r4/StructureDefinition/BRIndividuo').empty().not())"}],"target":[{"context":"IPSEntryPatient","contextType":"variable","element":"resource","variable":"IPSEntryPatientResource"}],"rule":[{"name":"SetPatientFullUrl","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource"}],"target":[{"context":"IPSEntryPatient","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPatientReference"}]}]},{"name":"SetPatientResource","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource"}],"target":[{"context":"IPSEntryPatient","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"RNDSEntryResourceEntryResourceEntryResource"}]}]},{"name":"SetPatientId","source":[{"context":"RNDSEntryResourceEntryResourceEntryResource"}],"target":[{"context":"IPSEntryPatientResource","contextType":"variable","element":"id","transform":"copy","parameter":[{"valueId":"IPSPatientReference"}]}]}]}]}]}]}]}]},{"name":"SetEmptyAuthor","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryPractitioner","contextType":"variable"}],"rule":[{"name":"SetFullUrl","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryPractitioner","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPractitionerReference"}]}]},{"name":"SetAuthor","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"IPSOrganization","transform":"create","parameter":[{"valueString":"Organization"}]}],"rule":[{"name":"SetId","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSOrganization","contextType":"variable","element":"id","transform":"copy","parameter":[{"valueId":"IPSPractitionerReference"}]}]},{"name":"SetIdentifier","source":[{"context":"RNDSEntry"}],"target":[{"contextType":"variable","variable":"IPSPractitionerIdentifier","transform":"create","parameter":[{"valueString":"Identifier"}]},{"context":"IPSPractitionerIdentifier","contextType":"variable","element":"system","transform":"copy","parameter":[{"valueString":"http://www.saude.gov.br/fhir/r4/NamingSystem/cnpj"}]},{"context":"IPSPractitionerIdentifier","contextType":"variable","element":"value","transform":"copy","parameter":[{"valueString":"00394544000185"}]},{"context":"IPSOrganization","contextType":"variable","element":"identifier","transform":"copy","parameter":[{"valueId":"IPSPractitionerIdentifier"}]}]},{"name":"SetName","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSOrganization","contextType":"variable","element":"name","transform":"copy","parameter":[{"valueString":"Ministrio da Sade do Brasil"}]}]},{"name":"SetAuthor","source":[{"context":"RNDSEntry"}],"target":[{"context":"IPSEntryPractitioner","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSPractitionerReference"}]},{"context":"IPSEntryPractitioner","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSOrganization"}]}]}]}]},{"name":"SetResourceComposition","source":[{"context":"RNDSEntryResource","element":"id","variable":"RNDSEntryResourceId"}],"target":[{"context":"IPSEntryResourceComposition","contextType":"variable","element":"id","variable":"IPSEntryResourceCompositionId"},{"context":"IPSEntry","contextType":"variable","element":"fullUrl","transform":"append","parameter":[{"valueString":"urn:uuid:"},{"valueId":"IPSEntryResourceCompositionId"}]},{"context":"IPSEntry","contextType":"variable","element":"resource","transform":"copy","parameter":[{"valueId":"IPSEntryResourceComposition"}]}]}]}]}]}]},{"name":"DataAbsentReason","typeMode":"none","input":[{"name":"src","type":"Element","mode":"source"},{"name":"tgt","type":"Element","mode":"target"}],"rule":[{"name":"SetExtension","source":[{"context":"src"}],"target":[{"contextType":"variable","variable":"TgtExtension","transform":"create","parameter":[{"valueString":"Extension"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"code"}]},{"context":"c","contextType":"variable","element":"value","transform":"copy","parameter":[{"valueString":"unknown"}]},{"context":"TgtExtension","contextType":"variable","element":"url","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/StructureDefinition/data-absent-reason"}]},{"context":"TgtExtension","contextType":"variable","element":"value","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"tgt","contextType":"variable","element":"extension","transform":"copy","parameter":[{"valueId":"TgtExtension"}]}]}]},{"name":"NotApplicable","typeMode":"none","input":[{"name":"src","type":"Element","mode":"source"},{"name":"tgt","type":"Element","mode":"target"}],"rule":[{"name":"SetExtension","source":[{"context":"src"}],"target":[{"contextType":"variable","variable":"TgtExtension","transform":"create","parameter":[{"valueString":"Extension"}]},{"contextType":"variable","variable":"c","transform":"create","parameter":[{"valueString":"code"}]},{"context":"c","contextType":"variable","element":"value","transform":"copy","parameter":[{"valueString":"not-applicable"}]},{"context":"TgtExtension","contextType":"variable","element":"url","transform":"copy","parameter":[{"valueString":"http://hl7.org/fhir/StructureDefinition/data-absent-reason"}]},{"context":"TgtExtension","contextType":"variable","element":"value","transform":"copy","parameter":[{"valueId":"c"}]},{"context":"tgt","contextType":"variable","element":"extension","transform":"copy","parameter":[{"valueId":"TgtExtension"}]}]}]}]}